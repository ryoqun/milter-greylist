#
# Greylisting config file
#
# $Id: greylist.conf,v 1.18 2004/11/09 06:57:07 manu Exp $
#

# If you work with multiple MX, list them with 
# peer entries to enable greylist sync among the MX
#peer 192.0.2.17
#peer 192.0.2.18


# You may wish to use a specific local address or port for 
# syncing between MXes. Of course one of your interfaces 
# must have the address assigned. An '*' for the address 
# means any address.
#syncaddr *
#syncaddr * port 7689
#syncaddr 192.0.2.2
#syncaddr 192.0.2.2 port 9785
#syncaddr 2001:db8::1:c3b5:123
#syncaddr 2001:db8::1:c3b5:123 port 1234

# Greylisting your own MTA is a very bad idea: never 
# comment this line, except for testing purposes.
addr 127.0.0.0/8

# You will want to avoid greylisting your own clients 
# as well, by filtering out your IP address blocks.
# Here is an example if you use 192.0.2.0/16
#addr 192.0.2.0/16

# It is also possible de whitelist machines sender
# machines using their DNS names.
#domain example.net

# You can avoid greylisting by filtering on the sender 
# enveloppe address but this is not a good idea: it
# can be trivially forged.
#from friendly@example.com

# Some of your users do not get any spam because 
# their addresses have never been collected by 
# spammers. They will want to avoid the extra delivery 
# delay caused by grey listing. You can filter on the
# recipient enveloppe address to achieve that.
# NB: when using -T, the meaning of thoses lines is
# reversed: they select the recipient for which 
# grey listing is enabled.
#rcpt John.Doe@example.net

# It is possible to use regular expression in from 
# and rcpt lines. The expression must be enclosed by
# slashes (/). Note that no escaping is available to 
# provide slashes inside the regular expression.
#rcpt /.*@example\.net/

# This option tells milter-greylist when it should
# add an X-Greylist header. Default is all, which
# cause a header to always be added. Other possible
# values are none, delays and nodelays
#report all

#
# All the following options have command-line equivalents
# see greylist.conf(5) for the exact equivalences.
#

# How long does a client has to wait before we accept 
# the messages it retries to send. Here, 1 hour.
#greylist 1h

# How long does auto-whitelisting lasts (set it to 0
# to disable auto-whitelisting). Here, 3 days
#autowhite 3d

# Normally, clients that succeed SMTP AUTH are not 
# greylisted. Uncomment this if you want to 
# greylist them regardeless of SMTP AUTH
#noauth

# If milter-greylist was built with SPF support, then
# SPF-compliant senders are not greylisted. Uncomment
# this to greylist them regardless of SPF compliance
#nospf

# Uncomment this to enable verbose output
#verbose

# Uncomment if you want milter-greylist to remain 
# in the foreground (no daemon)
#nodetach

# Uncomment if you want auto-whitelist to work for
# the IP rather than for the (IP, sender, reciever)
# tuple. 
#lazyaw 

# Uncomment this if you do not want milter-greylist
# to tell its client how long they are greylisted.
#quiet

# You can specify a file where milter-greylist will
# store its PID
#pidfile "/var/run/milter-greylist.pid"

# The socket used to communicate with Sendmail can
# be specified in this file:
#socket "/var/milter-greylist/milter-greylist.sock"

# The dumpfile location
#dumpfile "/var/milter-greylist/greylist.db"

# How often should we dump to the dumpfile (0: on each change, -1: never)
#dumpfreq 10m

# How long will the greylist database retain tuples
#timeout 5d

# The user the milter should run as
#user "smmsp"

# This is a list of broken MTA that break with greylisting
# Copied from http://greylisting.org/whitelisting.html
addr 12.5.136.141/32	# Southwest Airlines (unique sender, no retry)
addr 12.5.136.142/32	# Southwest Airlines
addr 64.12.136.0/24	# AOL (common pool)
addr 64.12.137.0/24	# AOL
addr 64.12.138.0/24	# AOL
addr 64.125.132.254/32	# collab.net (unique sender per attempt)
addr 66.135.209.0/24	# Ebay (for time critical alerts)
addr 66.135.197.0/24	# Ebay
addr 216.33.244.0/24	# Ebay
addr 66.218.66.0/23	# Yahoo Groups servers (common pool, no retry)
addr 152.163.225.0/24	# AOL
addr 195.46.220.208/32	# mgn.net
addr 195.46.220.209/32	# mgn.net
addr 195.46.220.210/32	# mgn.net
addr 195.46.220.211/32	# mgn.net
addr 195.46.220.221/32	# mgn.net
addr 195.46.220.222/32	# mgn.net
addr 195.238.2.105/32	# skynet.be (wierd retry pattern)
addr 195.238.2.124/32	# skynet.be
addr 195.238.3.12/32	# skynet.be
addr 195.238.3.13/32	# skynet.be
addr 204.107.120.10/32	# Ameritrade (no retry)
addr 205.188.156.0/24	# AOL
addr 205.206.231.0/24	# SecurityFocus.com (unique sender per attempt)
addr 207.115.63.0/24	# Prodigy - retries continually (no delay)
addr 207.171.168.0/24	# Amazon.com
addr 207.171.180.0/24	# Amazon.com
addr 207.171.187.0/24	# Amazon.com
addr 207.171.188.0/24	# Amazon.com
addr 207.171.190.0/24	# Amazon.com
addr 213.136.52.31/32	# Mysql.com (unique sender)
addr 217.158.50.178/32	# AXKit mailing list (unique sender per attempt)
